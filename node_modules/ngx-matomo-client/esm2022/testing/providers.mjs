import { makeEnvironmentProviders } from '@angular/core';
import { MATOMO_CONFIGURATION, MatomoTracker, } from 'ngx-matomo-client/core';
import { MatomoTestingTracker } from './matomo-testing-tracker';
/**
 * Set up a no-op Matomo tracker. Useful for testing scenario.
 *
 *
 * Testing tracker is available as both {@link MatomoTracker} and {@link MatomoTestingTracker} injection tokens,
 * the latter allowing to customize testing behavior (see {@link MatomoTestingTracker}).
 *
 * @see MatomoTestingTracker
 */
export function provideMatomoTesting(config = {}, ..._ignored) {
    const providers = [
        MatomoTestingTracker,
        {
            provide: MatomoTracker,
            useExisting: MatomoTestingTracker,
        },
    ];
    // Allow to provide a configuration, because it can be useful for users depending on `MATOMO_CONFIGURATION` in their code.
    if (typeof config === 'function') {
        providers.push({
            provide: MATOMO_CONFIGURATION,
            useFactory: config,
        });
    }
    else {
        providers.push({
            provide: MATOMO_CONFIGURATION,
            useValue: config,
        });
    }
    return makeEnvironmentProviders(providers);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvdmlkZXJzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LW1hdG9tby1jbGllbnQvdGVzdGluZy9wcm92aWRlcnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUF3Qix3QkFBd0IsRUFBWSxNQUFNLGVBQWUsQ0FBQztBQUN6RixPQUFPLEVBQ0wsb0JBQW9CLEVBR3BCLGFBQWEsR0FDZCxNQUFNLHdCQUF3QixDQUFDO0FBQ2hDLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBRWhFOzs7Ozs7OztHQVFHO0FBQ0gsTUFBTSxVQUFVLG9CQUFvQixDQUNsQyxTQUE4RSxFQUFFLEVBQ2hGLEdBQUcsUUFBeUI7SUFFNUIsTUFBTSxTQUFTLEdBQWU7UUFDNUIsb0JBQW9CO1FBQ3BCO1lBQ0UsT0FBTyxFQUFFLGFBQWE7WUFDdEIsV0FBVyxFQUFFLG9CQUFvQjtTQUNsQztLQUNGLENBQUM7SUFFRiwwSEFBMEg7SUFDMUgsSUFBSSxPQUFPLE1BQU0sS0FBSyxVQUFVLEVBQUU7UUFDaEMsU0FBUyxDQUFDLElBQUksQ0FBQztZQUNiLE9BQU8sRUFBRSxvQkFBb0I7WUFDN0IsVUFBVSxFQUFFLE1BQU07U0FDbkIsQ0FBQyxDQUFDO0tBQ0o7U0FBTTtRQUNMLFNBQVMsQ0FBQyxJQUFJLENBQUM7WUFDYixPQUFPLEVBQUUsb0JBQW9CO1lBQzdCLFFBQVEsRUFBRSxNQUFNO1NBQ2pCLENBQUMsQ0FBQztLQUNKO0lBRUQsT0FBTyx3QkFBd0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUM3QyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRW52aXJvbm1lbnRQcm92aWRlcnMsIG1ha2VFbnZpcm9ubWVudFByb3ZpZGVycywgUHJvdmlkZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG4gIE1BVE9NT19DT05GSUdVUkFUSU9OLFxuICBNYXRvbW9Db25maWd1cmF0aW9uLFxuICBNYXRvbW9GZWF0dXJlLFxuICBNYXRvbW9UcmFja2VyLFxufSBmcm9tICduZ3gtbWF0b21vLWNsaWVudC9jb3JlJztcbmltcG9ydCB7IE1hdG9tb1Rlc3RpbmdUcmFja2VyIH0gZnJvbSAnLi9tYXRvbW8tdGVzdGluZy10cmFja2VyJztcblxuLyoqXG4gKiBTZXQgdXAgYSBuby1vcCBNYXRvbW8gdHJhY2tlci4gVXNlZnVsIGZvciB0ZXN0aW5nIHNjZW5hcmlvLlxuICpcbiAqXG4gKiBUZXN0aW5nIHRyYWNrZXIgaXMgYXZhaWxhYmxlIGFzIGJvdGgge0BsaW5rIE1hdG9tb1RyYWNrZXJ9IGFuZCB7QGxpbmsgTWF0b21vVGVzdGluZ1RyYWNrZXJ9IGluamVjdGlvbiB0b2tlbnMsXG4gKiB0aGUgbGF0dGVyIGFsbG93aW5nIHRvIGN1c3RvbWl6ZSB0ZXN0aW5nIGJlaGF2aW9yIChzZWUge0BsaW5rIE1hdG9tb1Rlc3RpbmdUcmFja2VyfSkuXG4gKlxuICogQHNlZSBNYXRvbW9UZXN0aW5nVHJhY2tlclxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJvdmlkZU1hdG9tb1Rlc3RpbmcoXG4gIGNvbmZpZzogUGFydGlhbDxNYXRvbW9Db25maWd1cmF0aW9uPiB8ICgoKSA9PiBQYXJ0aWFsPE1hdG9tb0NvbmZpZ3VyYXRpb24+KSA9IHt9LFxuICAuLi5faWdub3JlZDogTWF0b21vRmVhdHVyZVtdXG4pOiBFbnZpcm9ubWVudFByb3ZpZGVycyB7XG4gIGNvbnN0IHByb3ZpZGVyczogUHJvdmlkZXJbXSA9IFtcbiAgICBNYXRvbW9UZXN0aW5nVHJhY2tlcixcbiAgICB7XG4gICAgICBwcm92aWRlOiBNYXRvbW9UcmFja2VyLFxuICAgICAgdXNlRXhpc3Rpbmc6IE1hdG9tb1Rlc3RpbmdUcmFja2VyLFxuICAgIH0sXG4gIF07XG5cbiAgLy8gQWxsb3cgdG8gcHJvdmlkZSBhIGNvbmZpZ3VyYXRpb24sIGJlY2F1c2UgaXQgY2FuIGJlIHVzZWZ1bCBmb3IgdXNlcnMgZGVwZW5kaW5nIG9uIGBNQVRPTU9fQ09ORklHVVJBVElPTmAgaW4gdGhlaXIgY29kZS5cbiAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdmdW5jdGlvbicpIHtcbiAgICBwcm92aWRlcnMucHVzaCh7XG4gICAgICBwcm92aWRlOiBNQVRPTU9fQ09ORklHVVJBVElPTixcbiAgICAgIHVzZUZhY3Rvcnk6IGNvbmZpZyxcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBwcm92aWRlcnMucHVzaCh7XG4gICAgICBwcm92aWRlOiBNQVRPTU9fQ09ORklHVVJBVElPTixcbiAgICAgIHVzZVZhbHVlOiBjb25maWcsXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gbWFrZUVudmlyb25tZW50UHJvdmlkZXJzKHByb3ZpZGVycyk7XG59XG4iXX0=