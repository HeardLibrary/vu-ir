import { NgModule, Optional, SkipSelf } from '@angular/core';
import { MATOMO_FORM_ANALYTICS_CONFIGURATION, } from './configuration';
import { TrackFormFieldDirective } from './directives/track-form-field.directive';
import { TrackFormDirective } from './directives/track-form.directive';
import { TrackFormsDirective } from './directives/track-forms.directive';
import * as i0 from "@angular/core";
import * as i1 from "./matomo-form-analytics-initializer.service";
export const MATOMO_FORM_ANALYTICS_DIRECTIVES = [
    TrackFormDirective,
    TrackFormsDirective,
    TrackFormFieldDirective,
];
export class MatomoFormAnalyticsModule {
    constructor(formAnalytics, parent) {
        this.formAnalytics = formAnalytics;
        if (!parent) {
            // Do not initialize if it is already (by a parent module)
            this.formAnalytics.initialize();
        }
    }
    static forRoot(config = {}) {
        return {
            ngModule: MatomoFormAnalyticsModule,
            providers: [{ provide: MATOMO_FORM_ANALYTICS_CONFIGURATION, useValue: config }],
        };
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.2", ngImport: i0, type: MatomoFormAnalyticsModule, deps: [{ token: i1.MatomoFormAnalyticsInitializer }, { token: MatomoFormAnalyticsModule, optional: true, skipSelf: true }], target: i0.ɵɵFactoryTarget.NgModule }); }
    static { this.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: "14.0.0", version: "17.3.2", ngImport: i0, type: MatomoFormAnalyticsModule, imports: [TrackFormDirective,
            TrackFormsDirective,
            TrackFormFieldDirective], exports: [TrackFormDirective,
            TrackFormsDirective,
            TrackFormFieldDirective] }); }
    static { this.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: "12.0.0", version: "17.3.2", ngImport: i0, type: MatomoFormAnalyticsModule }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.2", ngImport: i0, type: MatomoFormAnalyticsModule, decorators: [{
            type: NgModule,
            args: [{
                    imports: [...MATOMO_FORM_ANALYTICS_DIRECTIVES],
                    exports: [...MATOMO_FORM_ANALYTICS_DIRECTIVES],
                }]
        }], ctorParameters: () => [{ type: i1.MatomoFormAnalyticsInitializer }, { type: MatomoFormAnalyticsModule, decorators: [{
                    type: Optional
                }, {
                    type: SkipSelf
                }] }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0b21vLWZvcm0tYW5hbHl0aWNzLm1vZHVsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1tYXRvbW8tY2xpZW50L2Zvcm0tYW5hbHl0aWNzL21hdG9tby1mb3JtLWFuYWx5dGljcy5tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUF1QixRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNsRixPQUFPLEVBQ0wsbUNBQW1DLEdBRXBDLE1BQU0saUJBQWlCLENBQUM7QUFDekIsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0seUNBQXlDLENBQUM7QUFDbEYsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDdkUsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7OztBQUd6RSxNQUFNLENBQUMsTUFBTSxnQ0FBZ0MsR0FBRztJQUM5QyxrQkFBa0I7SUFDbEIsbUJBQW1CO0lBQ25CLHVCQUF1QjtDQUNmLENBQUM7QUFNWCxNQUFNLE9BQU8seUJBQXlCO0lBQ3BDLFlBQ21CLGFBQTZDLEVBQ3RDLE1BQWtDO1FBRHpDLGtCQUFhLEdBQWIsYUFBYSxDQUFnQztRQUc5RCxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ1gsMERBQTBEO1lBQzFELElBQUksQ0FBQyxhQUFhLENBQUMsVUFBVSxFQUFFLENBQUM7U0FDakM7SUFDSCxDQUFDO0lBRUQsTUFBTSxDQUFDLE9BQU8sQ0FDWixTQUEyQyxFQUFFO1FBRTdDLE9BQU87WUFDTCxRQUFRLEVBQUUseUJBQXlCO1lBQ25DLFNBQVMsRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLG1DQUFtQyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsQ0FBQztTQUNoRixDQUFDO0lBQ0osQ0FBQzs4R0FsQlUseUJBQXlCOytHQUF6Qix5QkFBeUIsWUFUcEMsa0JBQWtCO1lBQ2xCLG1CQUFtQjtZQUNuQix1QkFBdUIsYUFGdkIsa0JBQWtCO1lBQ2xCLG1CQUFtQjtZQUNuQix1QkFBdUI7K0dBT1oseUJBQXlCOzsyRkFBekIseUJBQXlCO2tCQUpyQyxRQUFRO21CQUFDO29CQUNSLE9BQU8sRUFBRSxDQUFDLEdBQUcsZ0NBQWdDLENBQUM7b0JBQzlDLE9BQU8sRUFBRSxDQUFDLEdBQUcsZ0NBQWdDLENBQUM7aUJBQy9DOzswQkFJSSxRQUFROzswQkFBSSxRQUFRIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kdWxlV2l0aFByb3ZpZGVycywgTmdNb2R1bGUsIE9wdGlvbmFsLCBTa2lwU2VsZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgTUFUT01PX0ZPUk1fQU5BTFlUSUNTX0NPTkZJR1VSQVRJT04sXG4gIE1hdG9tb0Zvcm1BbmFseXRpY3NDb25maWd1cmF0aW9uLFxufSBmcm9tICcuL2NvbmZpZ3VyYXRpb24nO1xuaW1wb3J0IHsgVHJhY2tGb3JtRmllbGREaXJlY3RpdmUgfSBmcm9tICcuL2RpcmVjdGl2ZXMvdHJhY2stZm9ybS1maWVsZC5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgVHJhY2tGb3JtRGlyZWN0aXZlIH0gZnJvbSAnLi9kaXJlY3RpdmVzL3RyYWNrLWZvcm0uZGlyZWN0aXZlJztcbmltcG9ydCB7IFRyYWNrRm9ybXNEaXJlY3RpdmUgfSBmcm9tICcuL2RpcmVjdGl2ZXMvdHJhY2stZm9ybXMuZGlyZWN0aXZlJztcbmltcG9ydCB7IE1hdG9tb0Zvcm1BbmFseXRpY3NJbml0aWFsaXplciB9IGZyb20gJy4vbWF0b21vLWZvcm0tYW5hbHl0aWNzLWluaXRpYWxpemVyLnNlcnZpY2UnO1xuXG5leHBvcnQgY29uc3QgTUFUT01PX0ZPUk1fQU5BTFlUSUNTX0RJUkVDVElWRVMgPSBbXG4gIFRyYWNrRm9ybURpcmVjdGl2ZSxcbiAgVHJhY2tGb3Jtc0RpcmVjdGl2ZSxcbiAgVHJhY2tGb3JtRmllbGREaXJlY3RpdmUsXG5dIGFzIGNvbnN0O1xuXG5ATmdNb2R1bGUoe1xuICBpbXBvcnRzOiBbLi4uTUFUT01PX0ZPUk1fQU5BTFlUSUNTX0RJUkVDVElWRVNdLFxuICBleHBvcnRzOiBbLi4uTUFUT01PX0ZPUk1fQU5BTFlUSUNTX0RJUkVDVElWRVNdLFxufSlcbmV4cG9ydCBjbGFzcyBNYXRvbW9Gb3JtQW5hbHl0aWNzTW9kdWxlIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBmb3JtQW5hbHl0aWNzOiBNYXRvbW9Gb3JtQW5hbHl0aWNzSW5pdGlhbGl6ZXIsXG4gICAgQE9wdGlvbmFsKCkgQFNraXBTZWxmKCkgcGFyZW50PzogTWF0b21vRm9ybUFuYWx5dGljc01vZHVsZSxcbiAgKSB7XG4gICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgIC8vIERvIG5vdCBpbml0aWFsaXplIGlmIGl0IGlzIGFscmVhZHkgKGJ5IGEgcGFyZW50IG1vZHVsZSlcbiAgICAgIHRoaXMuZm9ybUFuYWx5dGljcy5pbml0aWFsaXplKCk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGZvclJvb3QoXG4gICAgY29uZmlnOiBNYXRvbW9Gb3JtQW5hbHl0aWNzQ29uZmlndXJhdGlvbiA9IHt9LFxuICApOiBNb2R1bGVXaXRoUHJvdmlkZXJzPE1hdG9tb0Zvcm1BbmFseXRpY3NNb2R1bGU+IHtcbiAgICByZXR1cm4ge1xuICAgICAgbmdNb2R1bGU6IE1hdG9tb0Zvcm1BbmFseXRpY3NNb2R1bGUsXG4gICAgICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IE1BVE9NT19GT1JNX0FOQUxZVElDU19DT05GSUdVUkFUSU9OLCB1c2VWYWx1ZTogY29uZmlnIH1dLFxuICAgIH07XG4gIH1cbn1cbiJdfQ==