import { ENVIRONMENT_INITIALIZER, inject } from '@angular/core';
import { ÉµcreateMatomoFeature as createMatomoFeature, } from 'ngx-matomo-client/core';
import { MATOMO_FORM_ANALYTICS_CONFIGURATION, } from './configuration';
import { MatomoFormAnalyticsInitializer } from './matomo-form-analytics-initializer.service';
/** Enable automatic page views tracking */
export function withFormAnalytics(config) {
    const providers = [
        {
            provide: MATOMO_FORM_ANALYTICS_CONFIGURATION,
            useValue: config,
        },
        {
            provide: ENVIRONMENT_INITIALIZER,
            multi: true,
            useValue() {
                inject(MatomoFormAnalyticsInitializer).initialize();
            },
        },
    ];
    return createMatomoFeature("FormAnalytics" /* FormAnalyticsMatomoFeatureKind.FormAnalytics */, providers);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvdmlkZXJzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LW1hdG9tby1jbGllbnQvZm9ybS1hbmFseXRpY3MvcHJvdmlkZXJzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDaEUsT0FBTyxFQUVMLG9CQUFvQixJQUFJLG1CQUFtQixHQUM1QyxNQUFNLHdCQUF3QixDQUFDO0FBQ2hDLE9BQU8sRUFDTCxtQ0FBbUMsR0FFcEMsTUFBTSxpQkFBaUIsQ0FBQztBQUN6QixPQUFPLEVBQUUsOEJBQThCLEVBQUUsTUFBTSw2Q0FBNkMsQ0FBQztBQVM3RiwyQ0FBMkM7QUFDM0MsTUFBTSxVQUFVLGlCQUFpQixDQUFDLE1BQXlDO0lBQ3pFLE1BQU0sU0FBUyxHQUFHO1FBQ2hCO1lBQ0UsT0FBTyxFQUFFLG1DQUFtQztZQUM1QyxRQUFRLEVBQUUsTUFBTTtTQUNqQjtRQUNEO1lBQ0UsT0FBTyxFQUFFLHVCQUF1QjtZQUNoQyxLQUFLLEVBQUUsSUFBSTtZQUNYLFFBQVE7Z0JBQ04sTUFBTSxDQUFDLDhCQUE4QixDQUFDLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDdEQsQ0FBQztTQUNGO0tBQ0YsQ0FBQztJQUVGLE9BQU8sbUJBQW1CLHFFQUErQyxTQUFTLENBQUMsQ0FBQztBQUN0RixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRU5WSVJPTk1FTlRfSU5JVElBTElaRVIsIGluamVjdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgTWF0b21vRmVhdHVyZSBhcyBNYXRvbW9GZWF0dXJlLFxuICDJtWNyZWF0ZU1hdG9tb0ZlYXR1cmUgYXMgY3JlYXRlTWF0b21vRmVhdHVyZSxcbn0gZnJvbSAnbmd4LW1hdG9tby1jbGllbnQvY29yZSc7XG5pbXBvcnQge1xuICBNQVRPTU9fRk9STV9BTkFMWVRJQ1NfQ09ORklHVVJBVElPTixcbiAgTWF0b21vRm9ybUFuYWx5dGljc0NvbmZpZ3VyYXRpb24sXG59IGZyb20gJy4vY29uZmlndXJhdGlvbic7XG5pbXBvcnQgeyBNYXRvbW9Gb3JtQW5hbHl0aWNzSW5pdGlhbGl6ZXIgfSBmcm9tICcuL21hdG9tby1mb3JtLWFuYWx5dGljcy1pbml0aWFsaXplci5zZXJ2aWNlJztcblxuLyoqXG4gKiBBZGRpdGlvbmFsIE1hdG9tbyByb3V0ZXIgZmVhdHVyZXMga2luZFxuICovXG5leHBvcnQgY29uc3QgZW51bSBGb3JtQW5hbHl0aWNzTWF0b21vRmVhdHVyZUtpbmQge1xuICBGb3JtQW5hbHl0aWNzID0gJ0Zvcm1BbmFseXRpY3MnLFxufVxuXG4vKiogRW5hYmxlIGF1dG9tYXRpYyBwYWdlIHZpZXdzIHRyYWNraW5nICovXG5leHBvcnQgZnVuY3Rpb24gd2l0aEZvcm1BbmFseXRpY3MoY29uZmlnPzogTWF0b21vRm9ybUFuYWx5dGljc0NvbmZpZ3VyYXRpb24pOiBNYXRvbW9GZWF0dXJlIHtcbiAgY29uc3QgcHJvdmlkZXJzID0gW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IE1BVE9NT19GT1JNX0FOQUxZVElDU19DT05GSUdVUkFUSU9OLFxuICAgICAgdXNlVmFsdWU6IGNvbmZpZyxcbiAgICB9LFxuICAgIHtcbiAgICAgIHByb3ZpZGU6IEVOVklST05NRU5UX0lOSVRJQUxJWkVSLFxuICAgICAgbXVsdGk6IHRydWUsXG4gICAgICB1c2VWYWx1ZSgpIHtcbiAgICAgICAgaW5qZWN0KE1hdG9tb0Zvcm1BbmFseXRpY3NJbml0aWFsaXplcikuaW5pdGlhbGl6ZSgpO1xuICAgICAgfSxcbiAgICB9LFxuICBdO1xuXG4gIHJldHVybiBjcmVhdGVNYXRvbW9GZWF0dXJlKEZvcm1BbmFseXRpY3NNYXRvbW9GZWF0dXJlS2luZC5Gb3JtQW5hbHl0aWNzLCBwcm92aWRlcnMpO1xufVxuIl19